repeat
	
	display dialog "DmgCreator est un logiciel gratuit. Pour plus d‚Äôinformations sur celui-ci et sur son fonctionnement, consultez le r√©pertoire GitHub du projet." with title "DmgCreator" with icon note buttons {"Quitter", "Je cr√©e mon image disque üöÄ", "Plus d'options, √† propos..."} default button 2
	set choice to button returned of result
	
	if choice is "Quitter" then
		tell application "DmgCreator"
			quit
		end tell
	end if
	
	if choice is "Plus d'options, √† propos..." then
		display dialog "Plus d'options :" with title "DmgCreator" buttons {"Retour", "Modification d'ic√¥ne / verrouillage", "√Ä propos de DmgCreator"} default button 2 with icon note
		set choice to button returned of result
		
		if choice is "√Ä propos de DmgCreator" then
			display dialog "Version 1.0 build 4
2023, iStuces

Co-cr√©√© par l'intelligence artificielle. üß†
Pour toute suggestion ou tout signalement, merci de contacter istucesyt@gmail.com
Pour b√©n√©ficier de toutes les informations sur ce logiciel, et de plus de contenus, rejoignez le serveur Discord d'iStuces :" with title "√Ä propos de DmgCreator" buttons {"Rejoindre le serveur Discord", "Fermer"} with icon note default button 2
			
			set choice to button returned of result
			if choice is "Rejoindre le serveur Discord" then
				tell application "Safari"
					activate
					open location "https://tinyurl.com/iStuces-Discord"
				end tell
			end if
			
		end if
		
	end if
	
	if choice is "Modification d'ic√¥ne / verrouillage" then
		display dialog "Vous souhaitez..." with title "Modification d'ic√¥ne / verrouillage" buttons {"...modifier l'ic√¥ne d'une image disque ou d'un volume", "...verrouiller une image disque", "Fermer"}
		set choice to button returned of result
	end if
	
	if choice is "Je cr√©e mon image disque üöÄ" then
		
		display dialog "Entrez la taille de l'image disque (par exemple, 1g pour 1 Go, 1m pour 1 Mo, 1k pour 1 Ko...)" default answer "1g" buttons {"Annuler", "Suivant"} default button 2 with title "Cr√©ation de l'image disque"
		set volumeSize to the text returned of the result
		
		display dialog "Entrez le nom de l'image disque" default answer "Ma super image üöÄ" buttons {"Annuler", "Suivant"} default button 2 with title "Cr√©ation de l'image disque"
		set volumeName to the text returned of the result
		
		set imageFolderPath to (choose folder with prompt "S√©lectionnez l'emplacement d'enregistrement de l'image disque.")
		
		display dialog "Afin d'√©viter toute erreur, veuillez v√©rifier qu'aucune image disque du m√™me nom soit pr√©sente dans le dossier de destination." buttons {"Continuer"} with icon note with title "Cr√©ation de l'image disque" default button 1
		
		display dialog "La cr√©ation de l'image disque va d√©buter. L'op√©ration ne devrait prendre que quelques secondes.
Ce message se fermera automatiquement dans 5 secondes." buttons {"OK"} with icon caution with title "Lancement de l'op√©ration" default button 1 giving up after 5
		
		set imageFilePath to POSIX path of imageFolderPath & volumeName
		
		set createCmd to "hdiutil create -size " & volumeSize & " -fs HFS+ -volname " & quoted form of volumeName & " " & quoted form of imageFilePath
		do shell script createCmd
		
		display dialog "La cr√©ation de l'image disque est termin√©e !
Afin de monter le volume associ√©, double-cliquez sur celle-ci.
	
Vous pouvez renommer manuellement l'image disque ou le volume, et √©crire sur le volume.
	
Acc√©dez √† plus d'options (modification de l'ic√¥ne du volume / de l'image disque et verrouillage de celle-ci) √† partir du menu principal (section Plus d'options) ou des boutons ci-dessous :" buttons {"Modifier l'ic√¥ne d'une image disque ou d'un volume", "Verrouiller une image disque", "Suivant"} with icon note with title "Op√©ration termin√©e" default button 1
		set choice to button returned of result
		
	end if
	
	if choice is "...modifier l'ic√¥ne d'une image disque ou d'un volume" then
		display dialog "Vous devez poss√©der le droit d'√©criture sur l'image ou le volume dont vous souhaitez modifier l'ic√¥ne. Cette fonctionnalit√© utilise un build du script open-source IconChanger." with icon caution with title "Modification d'ic√¥ne" buttons {"Annuler", "Lancer IconChanger"} default button 2
		
		repeat
			set nameList to {"...d'une image disque", "...d'un volume d'image disque"}
			set choice to (choose from list the nameList with prompt "Modifier l'ic√¥ne..." with title "IconChanger") as string
			if choice is "false" then exit repeat
			
			if choice is "...d'une image disque" then
				set access to choose file with prompt "S√©lectionnez l'image disque dont vous souhaitez modifier l'ic√¥ne"
			end if
			if choice is "...d'un volume d'image disque" then
				set access to choose folder with prompt "S√©lectionnez le volume dont vous souhaitez modifier l'ic√¥ne"
			end if
			
			set accessi to choose file with prompt "S√©lectionnez l'ic√¥ne de remplacement"
			
			tell application "Finder"
				set touch to "c"
				activate
				open information window of accessi
				activate
			end tell
			
			
			tell application "System Events" to tell process "Finder" to tell window 1
				keystroke tab
				delay 0.5
				keystroke (touch & "w") using command down
				delay 0.5
			end tell
			
			tell application "Finder"
				set touch to "v"
				activate
				open information window of access
				activate
			end tell
			
			tell application "System Events" to tell process "Finder" to tell window 1
				keystroke tab
				keystroke (touch & "w") using command down
			end tell
			exit repeat
			
		end repeat
		
		display dialog "L'op√©ration est termin√©e." with icon note with title "Modification d'ic√¥ne" buttons {"Fermer"} default button 1
	end if
	
	if choice is "Modifier l'ic√¥ne d'une image disque ou d'un volume" then
		display dialog "Vous devez poss√©der le droit d'√©criture sur l'image ou le volume dont vous souhaitez modifier l'ic√¥ne. Cette fonctionnalit√© utilise un build du script open-source IconChanger." with icon caution with title "Modification d'ic√¥ne" buttons {"Annuler", "Lancer IconChanger"} default button 2
		
		repeat
			set nameList to {"...d'une image disque", "...d'un volume d'image disque"}
			set choice to (choose from list the nameList with prompt "Modifier l'ic√¥ne..." with title "IconChanger") as string
			if choice is "false" then exit repeat
			
			if choice is "...d'une image disque" then
				set access to choose file with prompt "S√©lectionnez l'image disque dont vous souhaitez modifier l'ic√¥ne"
			end if
			if choice is "...d'un volume d'image disque" then
				set access to choose folder with prompt "S√©lectionnez le volume dont vous souhaitez modifier l'ic√¥ne"
			end if
			
			set accessi to choose file with prompt "S√©lectionnez l'ic√¥ne de remplacement"
			
			tell application "Finder"
				set touch to "c"
				activate
				open information window of accessi
				activate
			end tell
			
			
			tell application "System Events" to tell process "Finder" to tell window 1
				keystroke tab
				delay 0.5
				keystroke (touch & "w") using command down
				delay 0.5
			end tell
			
			tell application "Finder"
				set touch to "v"
				activate
				open information window of access
				activate
			end tell
			
			tell application "System Events" to tell process "Finder" to tell window 1
				keystroke tab
				keystroke (touch & "w") using command down
			end tell
			exit repeat
			
		end repeat
		
		display dialog "L'op√©ration est termin√©e." with icon note with title "Modification d'ic√¥ne" buttons {"Fermer"} default button 1
	end if
	
	if choice is "...verrouiller une image disque" then
		display dialog "Malheureusement, DmgCreator ne peut pas verrouiller un volume d'image disque... Vous pouvez cepandant le faire manuellement en suivant les indications de l'aide en ligne :" with icon note with title "Verrouillage d'une image disque" buttons {"Acc√©der √† l'aide", "Fermer"} default button 1
		set choice to button returned of result
		
		if choice is "Acc√©der √† l'aide" then
			tell application "Safari"
				activate
				open location "https://github.com/istucesyt/DmgCreator/blob/main/Ressources/Prote%CC%81ger%20un%20volume%20d'image%20disque%20par%20un%20mot%20de%20passe.pdf"
			end tell
		end if
	end if
	
	if choice is "Verrouiller une image disque" then
		display dialog "Malheureusement, DmgCreator ne peut pas verrouiller un volume d'image disque... Vous pouvez cepandant le faire manuellement en suivant les indications de l'aide en ligne :" with icon note with title "Verrouillage d'une image disque" buttons {"Acc√©der √† l'aide", "Fermer"} default button 1
		set choice to button returned of result
		
		if choice is "Acc√©der √† l'aide" then
			tell application "Safari"
				activate
				open location "https://github.com/istucesyt/DmgCreator/blob/main/Ressources/Prote%CC%81ger%20un%20volume%20d'image%20disque%20par%20un%20mot%20de%20passe.pdf"
			end tell
		end if
	end if
	
end repeat
